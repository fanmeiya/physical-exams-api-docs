{
  "openapi": "3.0.3",
  "info": {
    "title": "体检智能分析系统",
    "description": "提供体检报告解读和套餐推荐服务的API",
    "version": "1.0.0"
  },
  "paths": {
    "/health_report": {
      "post": {
        "summary": "Health Report",
        "description": "处理健康问卷提交",
        "operationId": "health_report_health_report_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HealthReportRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/interpret_result/{task_id}": {
      "get": {
        "summary": "Get Interpret Result",
        "description": "获取体检报告解读结果",
        "operationId": "get_interpret_result_interpret_result__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/recommend_result/{task_id}": {
      "get": {
        "summary": "Get Recommend Result",
        "description": "获取体检套餐推荐结果",
        "operationId": "get_recommend_result_recommend_result__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/task_status/{task_id}": {
      "get": {
        "summary": "Get Task Status",
        "description": "获取任务状态",
        "operationId": "get_task_status_task_status__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{company_code}/packages/generate": {
      "post": {
        "summary": "Generate Company Packages",
        "description": "企业端生成体检套餐方案",
        "operationId": "generate_company_packages_companies__company_code__packages_generate_post",
        "parameters": [
          {
            "name": "company_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Company Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{company_code}/packages/status": {
      "get": {
        "summary": "Get Company Package Status",
        "description": "获取企业套餐生成状态",
        "operationId": "get_company_package_status_companies__company_code__packages_status_get",
        "parameters": [
          {
            "name": "company_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Company Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{company_code}/dashboard": {
      "get": {
        "summary": "Get Company Dashboard",
        "description": "企业端查看健康数据看板",
        "operationId": "get_company_dashboard_companies__company_code__dashboard_get",
        "parameters": [
          {
            "name": "company_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Company Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/companies/{company_code}/packages/compare": {
      "get": {
        "summary": "Get Company Package Compare",
        "description": "企业端与之前体检套餐的对比分析",
        "operationId": "get_company_package_compare_companies__company_code__packages_compare_get",
        "parameters": [
          {
            "name": "company_code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Company Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "健康检查接口",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthReportRequest": {
        "properties": {
          "action": {
            "type": "string",
            "title": "Action"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "uuid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uuid"
          },
          "pdf": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pdf"
          },
          "company_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Company Code",
            "default": "default_company"
          },
          "gender": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gender"
          },
          "age": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Age"
          },
          "pulse": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Pulse"
          },
          "waistline": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Waistline"
          },
          "sbp": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sbp"
          },
          "dbp": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dbp"
          },
          "symptoms": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Symptoms",
            "default": []
          },
          "medical_history": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Medical History",
            "default": []
          },
          "surgery_history": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Surgery History"
          },
          "previous_exam_abnormal": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Exam Abnormal",
            "default": []
          },
          "lung_nodule_level": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lung Nodule Level"
          },
          "hepatic_ct_done": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hepatic Ct Done"
          },
          "renal_ct_done": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Renal Ct Done"
          },
          "anemia_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Anemia Types",
            "default": []
          },
          "gastroscopy_done": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gastroscopy Done",
            "default": "否"
          },
          "gastroscopy_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gastroscopy Year"
          },
          "gastroscopy_result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Gastroscopy Result"
          },
          "colonoscopy_done": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Colonoscopy Done",
            "default": "否"
          },
          "colonoscopy_year": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Colonoscopy Year"
          },
          "colonoscopy_result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Colonoscopy Result"
          },
          "hpv_screened": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hpv Screened",
            "default": "否"
          },
          "hpv_years": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hpv Years"
          },
          "smoking": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smoking",
            "default": "否"
          },
          "smoking_years": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smoking Years"
          },
          "smoking_daily": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smoking Daily"
          },
          "smoking_quit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smoking Quit",
            "default": "否"
          },
          "drinking": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Drinking",
            "default": "否"
          },
          "white_liquor_amount": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "White Liquor Amount"
          },
          "beer_amount": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Beer Amount"
          },
          "asbestos_exposure": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asbestos Exposure",
            "default": "否"
          },
          "occupation_traits": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Occupation Traits",
            "default": []
          },
          "lifestyle": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lifestyle",
            "default": []
          },
          "diet": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Diet",
            "default": []
          },
          "marriage_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Marriage Status",
            "default": "否"
          },
          "marriage_years": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Marriage Years"
          },
          "family_history": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family History",
            "default": []
          },
          "family_cancer_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Cancer Types",
            "default": []
          },
          "antihypertensive_names": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Antihypertensive Names"
          },
          "lipidlowering_names": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lipidlowering Names"
          },
          "hypoglycemic_names": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hypoglycemic Names"
          },
          "longterm_meds": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Longterm Meds"
          }
        },
        "type": "object",
        "required": [
          "action",
          "name",
          "title"
        ],
        "title": "HealthReportRequest"
      },
      "PackageResponse": {
        "properties": {
          "package_results": {
            "type": "string",
            "title": "Package Results"
          },
          "package_status": {
            "type": "string",
            "title": "Package Status"
          }
        },
        "type": "object",
        "required": [
          "package_results",
          "package_status"
        ],
        "title": "PackageResponse"
      },
      "TaskResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "ai_results": {
            "type": "string",
            "title": "Ai Results"
          },
          "ai_status": {
            "type": "string",
            "title": "Ai Status"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "ai_results",
          "ai_status"
        ],
        "title": "TaskResponse"
      },
      "TaskStatusResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "ai_status": {
            "type": "string",
            "title": "Ai Status"
          },
          "ai_results": {
            "type": "string",
            "title": "Ai Results"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "ai_status",
          "ai_results",
          "created_at"
        ],
        "title": "TaskStatusResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}